# InfluxDB schema design

각 인플럭스 DB의 유즈케이스는 유니크합니다. 따라서 여러분들이 스키마 디자인 하는것들도 그 유니크함이 반영되겠죠.
그래도 이 문서에서는 몇몇 유즈케이스에 대해서 추천되는 스키마 디자인을 가이드합니다.

- 데이터를 어디에 저장해야 하나요? (tag 혹은 field)
- 너무 많은 시리즈를 피해기
- 추천되는 네이밍 컨벤션을 따르기

> 이 가이드를 따라서 디자인하면 너무나 큰 시리즈 카디널리티를 피할 수 있고, 데이터 쿼리 퍼포먼스를 상승시킬 수 있습니다!

## 데이터를 어디에 저장해야 하나요? (태그 혹은 필드)
<strong>태그</strong>는 인덱싱 되지만, <strong>필드</strong>는 아닙니다. 이것은 태그를 쿼리하는게 필드를 쿼리하는 것 보다 더 성능면으로 우위가 있다는걸 의미합니다.

보편적으로, 여러분들의 쿼리문은 어떤게 태그로 저장되었고, 어떤게 필드로 저장되었는지 가이드가 되어야 합니다.

- 자주 쿼리되는 메타데이터를 태그에 저장합니다.
- 만약 각각의 데이터 포인트가 다른 값들을 갖고 있다면, 데이터를 필드에 저장해야 합니다.
- 숫자로된 값은 필드에 저장해야 합니다. (테그의 값은 오직 문자열 값만 저장이 가능하니까요)

## 너무 많은 시리즈를 피하기

<strong>태그</strong> 가 UUID나, 해쉬, 랜덤 문자열등을 갖게 되면 정말 많은 시리즈가 생기게 됩니다. 이를 `high series cardinality` 라고 합니다.  

High series cardinality는 여러 데이터베이스 워크로드에 매우 많은 메모리를 소모하게 만듭니다. InfluxDB는 measurement와 태그들을 인덱싱을 하기위해 사용하고, 읽기 속도를 올립니다. 하지만 너무 많은 인덱스가 생겨버리면, 읽기와 쓰기속도가 매우매우 느려지게 될겁니다. 따라서 저런 high-cardinality 데이터는 차라리 태그 대신에 필드에 저장하세요!

- 인덱스가 있다는건 데이터를 중간에 삭제하거나, 삽입 할 때 여러 인덱스가 다시 밀려나고, 땅겨지는 O(n) 연산 속도가 드는거 아시죠!! (자료구조)

> 만약 인플럭스DB의 읽기 쓰기 속도가 매우 느려졌다면. 무조건 여러분의 데이터가 너무 많은 시리즈를 갖게 되는거에요.


