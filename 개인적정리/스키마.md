# 인플럭스 DB의 데이터 스키마.

- 인플럭스 DB의 데이터는 하나의  Point가 다른 DB에서의 레코드와 같다.
- 이 포인트에는 다음과 같은 항목이 들어간다.
    - 측정치 이름(measurement)
    - 태그 : 태그는 인덱스가 붙는 놈으로써, 자주 쿼리되는 메타데이터를 담아야 한다.
        - 키
        - 값
    - 필드 : 필드는 인덱싱되진 않지만, 실시간으로 다른값이 들어간다면 필드의 키-값 쌍으로 들어가야 한다.
        - 키
        - 값
    - 타임스탬프



- 중요한 개념이 있는게.. 태그에 실시간 값을 담는것도 가능은 하지만
- 태그는 High series cardinality 이슈가 있어서. 너무 많은 키-값 쌍이 생기면 안된다. 그래서 공식 문서에서도 UUID나 해쉬같은걸 넣지 말라고 하는거고.
- 필드는 인덱싱 되지 않아서 쿼리할때 조건에 맞는 모든 것들을 스캔해버린다.

- 좀 어렵긴 한데 내가 만든 샘픓 데이터를 정리하자면 다음과 같다.

- `측정치 : "mem", 태그 키 : "user", 태그 값 : "user1", 필드 : "메모리 사용령", 값 : 실제 사용량(실수값) 타임스탬프`

- 측정치라는 개념도 조금 애매모호한듯.

- 라인 프로토콜 정리!
    - 첫번째 공백은 (측정치,태그) 와 필드 키-값 쌍을 구분한다.
    - 두번째 공백은 타임스탬프!

```console
cpu,host=host1 usage_user=3.8234,usage_system=4.23874 1556892726597397000
```

- 측정치 이름은 cpu고, 태그 키는 host, 태그 값은 host1
- 필드키는 usage_user, usage_system 두개고 값도 두개

