# Grafana 와의 연동

### 사전 조건

- 그라파나를 Docker를 이용해서 설치한다.
- `docker run -d --name=grafana_test -p 3000:3000 grafana/grafana`

- -d 의 의미는 데몬(백그라운드 서비스)으로 컨테이너를 실행하겠다는 의미
- --name은 해당 컨테이너를 사람이 알아 볼 수 있는 이름으로 지정하기
- -p 3000:3000 은 도커 컨테이너 내부 3000번 포트를 호스트 os 의 3000번 포트와 연결하겠다는 의미 (포트포워딩의 느낌과 비슷)

### 현재 문제점

- Influx DB를 내 호스트 PC에 설치하고, 127.0.0.1:8086 위에서 돌고있음.
- Grafana의 경우 Docker Container로서 동작하고 있으며. 127.0.0.1:3000 에서 돌고있고 이는 도커 컨테이너 내부의 Localhost임.
- 현재 InfluxDB의 Ipaddress가 127.0.0.1이라서, 그라파나 내부에서 127.0.0.1:8086을 요청하려고 하면, 내 호스트 PC의 로컬호스트를 쫓아가는 것이 아니라
- 그라파나가 돌고있는 자기의 localhost를 쫓아가는 상태네. 


### 두가지 해결 방법

1. Grafana도, influxDB도 둘다 도커 컨테이너로 띄우기
    - Dockercompose 이용!
2. Grafana와 influxDB 둘다 같은 이미지에 떠놓고 사용하기    
    - 권장되는 방법이 아님.